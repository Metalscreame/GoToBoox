<html>
  {{template "header.tmpl.html"}}
<body>
  {{template "nav.tmpl.html"}}

  <header>
      <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
          <div class="carousel-inner" role="listbox">
              <!-- Slide One - Set the background image for this slide in the line below -->
              <div class="carousel-item active" style="background-image: url('/static/bg.jpg')">
                  <div class="carousel-caption d-none d-md-block">
                      <h3>First Slide</h3>
                      <p>This is a description for the first slide.</p>
                  </div>
              </div>
          </div>
      </div>
  </header>
<hr>
  <!-- Page Content -->
  <div class="container">
      <div class="row">
          <div class="col-lg-6">
              <h2>Modern Business Features</h2>
              <p>The project includes:</p>
              <ul>
                  <li>
                      <strong>Bootstrap v4</strong>
                  </li>
                  <li>Unstyled page elements for easy customization</li>
                  <li>jQuery</li>
                  <li>Heroku</li>
                  <li>Go v.1.10</li>
                  <li>PostgreSQL</li>
                  <li><a href="https://github.com/Metalscreame/GoToBoox">Git</a></li>
                  <li>Working with RESTfull api</li>
              </ul>
              <p>The project is a golang based web application that is a book-crossing automated system.
                  It allows to manage online member accounts, book reservation and their usage tracking.</p>
          </div>
          <div class="col-lg-6" style="text-align: right">
              <h2>Popular books (TOP-5)</h2>
              <div class="row mb-4">
                  <div class="col-md-8">
                      <ul  id="popularBooks">

                      </ul>
                  </div>
                  <div class="col-md-4">
                  </div>
              </div>
          </div>
      </div>
      <!-- /.row -->

      <hr>

      <!-- Call to Action Section -->


  </div>
  <script>
      var xhr = new XMLHttpRequest();
      xhr.open('GET', '/api/v1', false);
      xhr.send();
      if (xhr.status != 200) {
          alert( xhr.status + ': ' + xhr.statusText );
      } else {
            var popularBooks = document.getElementById('popularBooks');
            var catList = document.getElementById('catList')
            var data = JSON.parse(xhr.responseText)
          console.log(data)
                for (var i = 0; i < data.data['PopularBooks'].length; i++){
                    var newLi = document.createElement('li')
                    newLi.innerHTML = "<a href='/categories/" + data.data['PopularBooks'][i]['id'] + "/books/" + data.data['PopularBooks'][i]['id'] + "'>" + data.data['PopularBooks'][i]['title'] + "</a>"
                    popularBooks.appendChild(newLi)
                }
                for (var i = 0; i < data.data['Categories'].length; i++){
                   var newLi = document.createElement('li')
                      newLi.innerHTML = "<a class=\"dropdown-item\" href='/categories/" + data.data['Categories'][i]['ID'] + "'>" + data.data['Categories'][i]['Title'] + "</a>"
                    catList.appendChild(newLi)
                }
      }
  </script>
  <!-- /.container -->
  {{template "footer.tmpl.html"}}

</body>
</html>
